<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WeatherNow | Real-time Local Weather Info</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <style>
        #weatherBox {
            border-style: solid;
            border-color: black;
        }
        .map {
            background-color: gray;
            height: 300px;
            widgh: 500px;
        }
        body {
            background-color: lightskyblue;
        }
    </style>
</head>
<main class="container">

<body onload=startTime()>
<script>
    //Digital Clock
    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById("currentTime").innerHTML =
            h + ":" + m + ":" + s;
        var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
    }
</script>

<div id="title">
    <h1>Weather Application</h1>
    <h3>5-Day Weather Forecast</h3>
</div>

<div id="localData">
    <h3 id="location">Location: City, State, Region</h3>
    <span id="currentTime"></span>
</div>

<div id="weatherBox" class="container glass">
    <div class="col-md-2 col-md-offset-1">
        <h2 id="day1"></h2>
        <ul class="list-unstyled">
            <li id="icon1"></li>
            <li id="temp1"></li>
            <li id="cond1"></li>
        </ul>
    </div>
    <div class="col-md-2">
        <h2 id="day2">Day 2</h2>
        <ul class="list-unstyled">
            <li id="icon2"></li>
            <li id="temp2"></li>
            <li id="cond2"></li>
        </ul>
    </div>
    <div class="col-md-2">
        <h2 id="day3">Day 3</h2>
        <ul class="list-unstyled">
            <li id="icon3"></li>
            <li id="temp3"></li>
            <li id="cond3"></li>
        </ul>
    </div>
    <div class="col-md-2">
        <h2 id="day4">Day 4</h2>
        <ul class="list-unstyled">
            <li id="icon4"></li>
            <li id="temp4"></li>
            <li id="cond4"></li>
        </ul>
    </div>
    <div class="col-md-2">
        <h2 id="day5">Day 5</h2>
        <ul class="list-unstyled">
            <li id="icon5"></li>
            <li id="temp5"></li>
            <li id="cond5"></li>
        </ul>
    </div>
</div>

<section class="map">Map goes here</section>
</main>

<!--jquery--->
<script src="http://code.jquery.com/jquery-2.2.4.js"></script>
<!-- Bootstrap JS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>
    "use strict";
    $(document).ready(function() {
        "use strict";
        $(document).ready(function () {
            var latitude;
            var longitude;
            var units;

//Geolocation
            $.getJSON("http://ip-api.com/json", function (geoData) {
                units = geoData.imperial;
                latitude = geoData.lat;
                longitude = geoData.lon;
                var city = geoData.city;
                var region = geoData.regionName;
                var country = geoData.country;
                var api = "http://api.openweathermap.org/data/2.5/forecast?lat=" + latitude + "&lon=" + longitude + "&appid=7d768f2db1dc9554926e225b6ff8e222";

                $("#location").html(city + ", " + region + ", " + country);

                $.getJSON(api, function (data) {
//Conversion from UNIX timestamp to actual date
                    var timestamp = data.list[0].dt;
                    var a = new Date(timestamp * 1000);
                    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                    var dayOfWeek = days[a.getDay()];
                    $("#day1").html(dayOfWeek);
                    $("#day2").html(days[(a.getDay()) + 1]);
                    $("#day3").html(days[(a.getDay()) + 2]);
                    $("#day4").html(days[(a.getDay()) + 3]);
                    $("#day5").html(days[(a.getDay()) + 4]);

//Weather Icons
                    $("#icon1").html("<img src='http://openweathermap.org/img/w/" + data.list[0].weather[0].icon + ".png' alt='Icon depicting current weather.'>");
                    $("#icon2").html("<img src='http://openweathermap.org/img/w/" + data.list[3].weather[0].icon + ".png' alt='Icon depicting current weather.'>");
                    $("#icon3").html("<img src='http://openweathermap.org/img/w/" + data.list[6].weather[0].icon + ".png' alt='Icon depicting current weather.'>");
                    $("#icon4").html("<img src='http://openweathermap.org/img/w/" + data.list[9].weather[0].icon + ".png' alt='Icon depicting current weather.'>");
                    $("#icon5").html("<img src='http://openweathermap.org/img/w/" + data.list[12].weather[0].icon + ".png' alt='Icon depicting current weather.'>");

//Temperatures
                    //var cTemp=((data.main.temp)-273.15).toFixed(2);
                    //var fTemp=((data.main.temp)*(9/5)-459.67).toFixed(2);
                    var temp1 = data.list[0].main.temp;
                    var temp2 = data.list[1].main.temp;
                    var temp3 = data.list[2].main.temp;
                    var temp4 = data.list[3].main.temp;
                    var temp5 = data.list[4].main.temp;
                    $("#temp1").html(temp1);
                    $("#temp2").html(temp2);
                    $("#temp3").html(temp3);
                    $("#temp4").html(temp4);
                    $("#temp5").html(temp5);

//Weather Conditions
                    var cond1 = data.list[0].weather[0].description;
                    var cond2 = data.list[3].weather[0].description;
                    var cond3 = data.list[6].weather[0].description;
                    var cond4 = data.list[9].weather[0].description;
                    var cond5 = data.list[12].weather[0].description;
                    $("#cond1").html(cond1.toUpperCase());
                    $("#cond2").html(cond2.toUpperCase());
                    $("#cond3").html(cond3.toUpperCase());
                    $("#cond4").html(cond4.toUpperCase());
                    $("#cond5").html(cond5.toUpperCase());
                });

            });
        });
    });

    function initMap() {
        var uluru = {lat: 37.0793, lng: 127.0519};
        var map = new google.maps.Map(document.getElementById("map"), {
            zoom: 19,
            center: uluru
        });
        var contentString = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">SakuSaku Chicken</h1>'+
            '<div id="bodyContent">'+
            '<p><strong>"Best Chicken South Korea"</strong><br>Address: 8, Sinjang-Ro, Pyeongtaek, Gyeonggi-do, South Korea</br>Phone Number: +82 31-665-9559  </p>'+
            '<p>Attribution: Restaurant, <a href="https://www.facebook.com/pages/Saku-Saku-chicken/200881959997349">'+
            'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
            '(last visited October 22, 2016).</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentString
        });
        var marker = new google.maps.Marker({
            map: map,
            draggable: true,
            animation: google.maps.Animation.DROP,
            position: uluru
        });
        marker.addListener('click', toggleBounce, function() {
        });
        function toggleBounce() {
            if (marker.getAnimation() !== null) {
                marker.setAnimation(null);
            } else {
                marker.setAnimation(google.maps.Animation.BOUNCE);
            }
        }
        marker.addListener('click', function() {
            infowindow.open(map, marker);
        });
    }


</script>

</body>

</html>
